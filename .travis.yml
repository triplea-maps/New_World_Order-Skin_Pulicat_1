language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: Zd26gS355YS/v7dLhp6G4eWXHSxGQxGr+6OnaSbGeD3sFUVx78y0TFVwMuUSSPVuhDq8CqeAmDv75Ly1IoeNlGggNVFGNpfSoTd9DkpvDa9AXxMujOFpwZJ9p3grXTe/EN3QnQ6c4tcc+L6miLG4vxw/ElUdnDG7bavXHH0DXCRJ76CWnVakZbHUFUoEkrTgdJZJ6b9pkhT99bXD8vQ2Zd/1Pj/smkiFHt/szqNKedBcpMPOywxTkoarI6dl1Uv2DEXYinO7sERz/vmwaLXa1fzxn2fIlTb9OFjlFskQw+icz4pte6mhrDfOP5a5PYaFJ59OEGlPL38s6oZj1yJpfqVfdTYytf+/nyvcJpt5zhP77RnLUlqq70f+PYX3eeAWKEMr9wUKMKNXMIG9nYc1EQElslv4I8KhH4VUYZ5lNycpeoX14/2dg5c/oXFsaSi6Ji3IQtW1Nj3PbpeftYWvnVIT1YEluLZKB8VXD0r+hpSbiS7OKPCXWrGR6UURejHQhSNaDi4+BSOBDFN5GBjukkmq8imPpaT2qSly3sP0gqkfL6D2WtUm/B75rtQOp1Do2NfyVppr+1YIGs4XRIMP52CNkR4jLy+rJypEdNjz51qYcbeCmV6af72+9w8sahOOWVXQrdQbaiF6n/Ott0C57NrtBmDpl00yDDl7XLDnQnQ=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
